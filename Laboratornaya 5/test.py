import unittest
from .gen_bin_tree import gen_bin_tree

class TestGenBinTree(unittest.TestCase):
    def test_height0(self):
        tree = gen_bin_tree(height=0, root=1)
        expected = {1: []}
        self.assertDictEqual(expected, tree)

    def test_height1(self):
        tree = gen_bin_tree(height=1, root=5,
                            left_node_value=lambda x: x + 1,
                            right_node_value=lambda x: x * x)
        expected = {5: [{6: []}, {25: []}]}
        self.assertDictEqual(expected, tree)

    def test_height2(self):
        tree = gen_bin_tree(height=2, root=10,
                            left_node_value=lambda x: x * x,
                            right_node_value=lambda x: 2 * (x + 4))
        expected = {10: [
            {100: [
                {10000: []},
                {208: []}
            ]},
            {28: [
                {784: []},
                {64: []}
            ]}
        ]}
        self.assertEqual(expected, tree)

    def test_height3(self):
        tree = gen_bin_tree(height=3, root=11,
                            left_node_value=lambda x: x * x,
                            right_node_value=lambda x: x * x + 2)
        expected = {11: [
            {121: [
                {14641: [
                    {214358881: []},
                    {214358883: []}
                ]},
                {14643: [
                    {214417449: []},
                    {214417451: []}
                ]}
            ]},
            {123: [
                {15129: [
                    {228886641: []},
                    {228886643: []}
                ]},
                {15131: [
                    {228947161: []},
                    {228947163: []}
                ]}
            ]}
        ]}
        self.assertDictEqual(expected, tree)

    def test_default(self):
        tree = gen_bin_tree()
        expected = {12: [
            {1728: [
                {5159780352: [
                    {137370551967459378662586974208: [
                        {2592274154412368294402517527097493563919882812285425404029152162634123499226358362406912: []},
                        {18870668547844457769972080826950345531368943638112857227263: []}
                    ]},
                    {26623333280885243903: [
                        {18870668547844457767845675201995069995304780716926805475327: []},
                        {708801874985091845328097640447798673408: []}
                    ]}
                ]},
                {2985983: [
                    {26623306532592857087: [
                        {18870611670182213155080187381798391846752800739638193557503: []},
                        {708800450728401498938090664093606125568: []}
                    ]},
                    {8916094476288: [
                        {708800450728163008715960357190339919872: []},
                        {79496740710093384994258943: []}
                    ]}
                ]}
            ]},
            {143: [
                {2924207: [
                    {25004854810776297743: [
                        {15634104538009057738683704388560745567451766057599218831407: []},
                        {625242764108002560806694025845786894048: []}
                    ]},
                    {8550986578848: [
                        {625242764107783202692279084322864136192: []},
                        {73119371471638623321007103: []}
                    ]}
                ]},
                {20448: [
                    {8549732155392: [
                        {624967636508761652620594332174057996288: []},
                        {73097919928943934034673663: []}
                    ]},
                    {418120703: [
                        {73097919404469165948668927: []},
                        {174824922277214208: []}
                    ]}
                ]}
            ]}
        ]}
        self.assertDictEqual(expected, tree)

if __name__ == "__main__":
    unittest.main()